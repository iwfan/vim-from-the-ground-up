# Vim 进阶者指南

原文链接: [https://thevaluable.dev/vim-advanced/](https://thevaluable.dev/vim-advanced/)

![Vim for advanced users](https://thevaluable.dev/images/2021/02_vim_advanced/vim-advanced.webp)

欢迎来到本 Vim 系列教程的第三部分！该系列教程可以帮你释放你前所未见的 Vim 超能力！

<!-- TODO 通用菜单 -->

这篇文章我们将会一起学习这些内容：

- 以前缀 `g` 开始的一些实用快捷键。
- range 是什么？如何使用？
- 快捷修复列表以及位置列表。
- 了不起的替换命令。
- 非常实用的`:global`（或者`:g`） 命令。
- 标记是什么？如何使用？
- 如何使用单个快捷键来增加或减小数字。
- 如何使用命令来对文本进行排序

不过在开始本文内容之前，我有一些建议给你：

1. 在你阅读的同时，记得打开你的 Vim，并对命令与快捷键加以实践。这能帮助你记住学到的这些知识。
2. 不要使用现成的 cheatsheet，制作你自己的。这能帮助你过滤出那些**你真正需要的命令**。

闲话到此为止，让我们正式开始！

## 实用的快捷键 “g”

让我们简单的以一组以`g` 开头的快捷键开始。Vim 中有许多以 `g` 开始的快捷键，并且我们已经在之前的部分使用了其中的一些，你能回想起来吗？

你可以在 NORMAL 模式下使用这些快捷键:

- `gf` - 编辑你光标下路径指向的文件（Go to File）
  - 你可以使用`CTRL+W CTRL+F`将该文件在新窗口中打开。
  - 如果你有插件`netrw` 的话（Vim 内建的文件浏览器，可以使用`:Lexplore` 命令打开），这还可以帮你打开网络上的资源。
- `gx` - 打开你光标下路径指向的文件。
  - 这会使用你系统的默认软件，根据后缀名打开文件。
  - URL 也是生效的，将使用你的默认浏览器打开链接。
  - 该快捷键只有当你有插件`netrw`时生效。
- `gi` -  移动到你上一次插入内容的位置，并进入 INSERT 模式。
  - 这在你停下手中的编辑，查看其他位置时非常有用。
  - 该操作用到了标记(mark)功能--将在后文介绍。
- `gv` - 重新选中之前在 VISUAL 模式下选择的区块。
- `gn` - 选择你上一次搜索的匹配项：
  1. 移动到上次搜索的匹配。
  2. 如果你不在 VISUAL 模式中，切换到 VISUAL 模式.
  3. 选中匹配项。
  4. 你可以继续使用`n`或者`gn` 来选中当前匹配项与下一个匹配项之间的空间。
- `gI` - 在当前行的最开始插入文本（不关注字符是否为空）。
  - 快捷键`I` 只会在*第一个非空字符之前*插入文本。
- `ga` - 打印出当前光标下字符的 Ascii 码值，包括八进制，十进制，以及十六进制。
- `gu` - 使用动作（motion） 转小写（如：`guiw`）
- `gU` - 使用动作（motion） 转大写（如：`gUiw`）

想尝试`gf` 与`gx` 的话，你可以在 Vim 中写下类似`www.google.com`这样的网址，然后将光标放在网址上，敲击快捷键就好了。别忘了 URL 后缀的`/`。

你很快就会发现`gx` 有一些不方便的地方：当你用来打开文件路径时，Vim 会挂起，直到你关闭那个文件。因此我构建了这样一个快捷键映射，你可以将它添加到你的`.vimrc`中：

```vim
nnoremap gX :silent :execute
            \ "!xdg-open" expand('%:p:h') . "/" . expand("<cfile>") " &"<cr>
```

这将把快捷键 `gx` 映射为使用 `xdg-open` 打开你光标下路径指向的文件，使用你喜欢的应用，在后台打开该文件，`xdg-open` 只适用于 Linux 系统，如果想在 MacOS 上使用，可以用`open` 来替代。

> Vim help
>
>- :help reference
>- :help g

## 块 (Ranges)
